<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- common.css -->
  <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: Arial, Helvetica, sans-serif;margin: 0;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
  <!-- ace-static.css -->
  <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
  <style>.ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;border-radius: 2px}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}</style>
  <!-- export.css -->
  <style>
    body{margin:0 auto;max-width:800px;line-height:1.4}
    #nav{margin:5px 0 10px;font-size:15px}
    #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
    #contentarea{font-size:15px;margin:16px 0}
    .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
    .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
    .latex-cell{white-space:pre-wrap;}
  </style>
  <!-- User CSS -->
  <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
</head>
<body>
  
  <div id="titlearea">
    <h2>Rails 5 - Active Job / Delayed Job Background Processing</h2>
  </div>
  <div id="contentarea"><div class="cell text-cell"><div>Active Job is a framework for declaring jobs and making them run on a variety of queuing backends. These jobs can be everything from regularly scheduled clean-ups, to billing charges, to mailings. Anything that can be chopped up into small units of work and run in parallel, really.</div><div><br></div></div><div class="cell text-cell"><h3>Generate A New Rails App</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">new</span>&nbsp;<span class="ace_identifier">newsletter_example</span>&nbsp;<span class="ace_keyword ace_operator">-</span><span class="ace_identifier">T</span>&nbsp;<span class="ace_keyword ace_operator">-</span><span class="ace_identifier">d</span>&nbsp;<span class="ace_identifier">postgresql</span>&nbsp;<span class="ace_keyword ace_operator">--</span><span class="ace_identifier">skip</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">turbolinks</span>
</div></div></div></div><div class="cell text-cell"><h3>Gemfile</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">source</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">https://rubygems.org</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ruby</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">2.3.1</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">rails</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;5.0.0</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">&gt;=&nbsp;5.0.0.1</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">pg</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;0.18</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">puma</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;3.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">sass-rails</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;5.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">uglifier</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">&gt;=&nbsp;1.3.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">jquery-rails</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">jbuilder</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;2.5</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">group</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:development</span>,&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:test</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">pry</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">group</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:development</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">letter_opener</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">web-console</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">listen</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;3.0.5</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">spring</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">spring-watcher-listen</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;2.0.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_identifier">install</span>
</div></div></div></div><div class="cell text-cell"><h3>Setup The Letter Opener Gem</h3></div><div class="cell text-cell"><a href="https://github.com/ryanb/letter_opener">https://github.com/ryanb/letter_opener</a></div><div class="cell text-cell"><h3>Add Flash Messages</h3></div><div class="cell text-cell"><b><i>app/views/layouts/application.html.erb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_xml-pe ace_doctype ace_xml">&lt;!</span><span class="ace_xml-pe ace_doctype ace_xml">DOCTYPE</span><span class="ace_text ace_whitespace ace_xml">&nbsp;</span><span class="ace_xml-pe ace_xml">html</span><span class="ace_xml-pe ace_doctype ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">html</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">head</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">title</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_text ace_xml">NewsletterExample</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">title</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_identifier">csrf_meta_tags</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">stylesheet_link_tag</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">application</span><span class="ace_string ace_end">'</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">javascript_include_tag</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">application</span><span class="ace_string ace_end">'</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">head</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">body</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%</span>&nbsp;<span class="ace_variable ace_language">flash</span>.<span class="ace_identifier">each</span>&nbsp;<span class="ace_keyword">do</span>&nbsp;|<span class="ace_identifier">key</span>,&nbsp;<span class="ace_identifier">value</span>|&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_entity ace_other ace_attribute-name ace_xml">class</span><span class="ace_keyword ace_operator ace_attribute-equals ace_xml">=</span><span class="ace_string ace_attribute-value ace_xml">"flash&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_identifier">value</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span><span class="ace_string ace_attribute-value ace_xml">"</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_identifier">value</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%</span>&nbsp;<span class="ace_keyword">end</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_keyword">yield</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">body</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">html</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div></div></div></div><div class="cell text-cell"><h3>Generate The Newsletter Mailer</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">mailer</span>&nbsp;<span class="ace_identifier">newsletter</span>&nbsp;<span class="ace_identifier">weekly</span>&nbsp;<span class="ace_identifier">monthly</span>&nbsp;<span class="ace_identifier">yearly</span>
</div></div></div></div><div class="cell text-cell"><h3>Generate The Newsletter Job</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">job</span>&nbsp;<span class="ace_identifier">newsletter</span>
</div></div></div></div><div class="cell text-cell"><b><i>app/jobs/newsletter_job.rb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">NewsletterJob</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">ApplicationJob</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">queue_as</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:default</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">perform</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">*</span><span class="ace_identifier">args</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">newsletter_args</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">args</span>.<span class="ace_identifier">first</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">case</span>&nbsp;<span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:newsletter</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;<span class="ace_keyword">when</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">weekly</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_class">NewsletterMailer</span>.<span class="ace_identifier">weekly</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">]</span>,&nbsp;<span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">])</span>.<span class="ace_identifier">deliver</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">when</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">monthly</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_class">NewsletterMailer</span>.<span class="ace_identifier">monthly</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">]</span>,&nbsp;<span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">])</span>.<span class="ace_identifier">deliver</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">when</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">yearly</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_class">NewsletterMailer</span>.<span class="ace_identifier">yearly</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">]</span>,&nbsp;<span class="ace_identifier">newsletter_args</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">])</span>.<span class="ace_identifier">deliver</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">else</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">raise</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">No&nbsp;Newsletter&nbsp;type&nbsp;was&nbsp;passed.</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell text-cell"><h3>Generate A Newsletter Controller</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">controller</span>&nbsp;<span class="ace_identifier">newsletter</span>&nbsp;<span class="ace_identifier">new</span>&nbsp;<span class="ace_keyword ace_operator">--</span><span class="ace_identifier">skip</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">routes</span>&nbsp;<span class="ace_keyword ace_operator">--</span><span class="ace_identifier">skip</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">assets</span>&nbsp;<span class="ace_keyword ace_operator">--</span><span class="ace_identifier">no</span><span class="ace_keyword ace_operator">-</span><span class="ace_identifier">helper</span>
</div></div></div></div><div class="cell text-cell"><b><i>app/controllers/newsletter_controller.rb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">NewsletterController</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">ApplicationController</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">new</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;The&nbsp;new&nbsp;form&nbsp;has&nbsp;a&nbsp;drop&nbsp;down&nbsp;with&nbsp;the&nbsp;options&nbsp;of:&nbsp;'weekly',&nbsp;'monthly',&nbsp;'yearly'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">create</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;params[:emails]&nbsp;comes&nbsp;in&nbsp;from&nbsp;the&nbsp;form&nbsp;as&nbsp;whatever&nbsp;the&nbsp;user&nbsp;types&nbsp;in</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;params[:subject]&nbsp;comes&nbsp;in&nbsp;from&nbsp;the&nbsp;form&nbsp;as&nbsp;whatever&nbsp;the&nbsp;user&nbsp;types&nbsp;in</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;&nbsp;&nbsp;this&nbsp;is&nbsp;going&nbsp;to&nbsp;be&nbsp;used&nbsp;to&nbsp;set&nbsp;the&nbsp;subject&nbsp;in&nbsp;the&nbsp;mailer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;params[:newsletter]&nbsp;comes&nbsp;in&nbsp;from&nbsp;the&nbsp;form&nbsp;as:&nbsp;'weekly',&nbsp;'monthly',&nbsp;'yearly'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_class">NewsletterJob</span>.<span class="ace_identifier">perform_later</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">emails</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:emails</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">subject</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">newsletter</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:newsletter</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_rparen">})</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_variable ace_language">flash</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:success</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">Newsletter&nbsp;Sent!</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">redirect_to</span>&nbsp;<span class="ace_identifier">new_newsletter_path</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell text-cell">perform_later: is going to put the job in the queue for immediate processing<br></div><div class="cell text-cell"><h3>Other Types Of Job Processing</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Enqueue&nbsp;a&nbsp;job&nbsp;to&nbsp;be&nbsp;performed&nbsp;tomorrow&nbsp;at&nbsp;noon.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_class">NewsletterJob</span>.<span class="ace_identifier">set</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">wait_until</span>:&nbsp;<span class="ace_support ace_class">Date</span>.<span class="ace_identifier">tomorrow</span>.<span class="ace_identifier">noon</span><span class="ace_paren ace_rparen">)</span>.<span class="ace_identifier">perform_later</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">emails</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:emails</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">subject</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">newsletter</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:newsletter</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_rparen">})</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Enqueue&nbsp;a&nbsp;job&nbsp;to&nbsp;be&nbsp;performed&nbsp;1&nbsp;week&nbsp;from&nbsp;now.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_class">NewsletterJob</span>.<span class="ace_identifier">set</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">wait</span>:&nbsp;<span class="ace_constant ace_numeric">1</span>.<span class="ace_identifier">week</span><span class="ace_paren ace_rparen">)</span>.<span class="ace_identifier">perform_later</span><span class="ace_paren ace_lparen">({</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">emails</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:emails</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">subject</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:subject</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;<span class="ace_identifier">newsletter</span>:&nbsp;<span class="ace_variable ace_language">params</span><span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:newsletter</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_indent-guide">&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_paren ace_rparen">})</span>
</div></div></div></div><div class="cell text-cell"><h3>Newsletter Controller View</h3></div><div class="cell text-cell"><b><i>app/views/newsletter/new.html.erb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">h1</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span><span class="ace_text ace_xml">Send&nbsp;A&nbsp;Newsletter</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">h1</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hr</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment ace_xml">&lt;!--&nbsp;NOTE:&nbsp;we&nbsp;are&nbsp;using&nbsp;form_tag&nbsp;instead&nbsp;of&nbsp;form_for&nbsp;because&nbsp;this&nbsp;form&nbsp;is&nbsp;not&nbsp;linked&nbsp;to&nbsp;a&nbsp;model!&nbsp;--&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">form_tag</span>&nbsp;<span class="ace_identifier">newsletter_index_path</span>&nbsp;<span class="ace_keyword">do</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">label_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Subject</span><span class="ace_string ace_end">"</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">br</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">text_area_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">subject</span><span class="ace_string ace_end">"</span>,&nbsp;<span class="ace_constant ace_language">nil</span>,&nbsp;<span class="ace_identifier">placeholder</span>:&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">Subject</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_identifier">cols</span>:&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">20</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_identifier">rows</span>:&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">5</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_identifier">required</span>:&nbsp;<span class="ace_constant ace_language ace_boolean">true</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">label_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Emails&nbsp;(*comma&nbsp;separated)</span><span class="ace_string ace_end">"</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">br</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">text_area_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">emails</span><span class="ace_string ace_end">"</span>,&nbsp;<span class="ace_constant ace_language">nil</span>,&nbsp;<span class="ace_identifier">placeholder</span>:&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">test@test.com,&nbsp;contact@dpl.com</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_identifier">required</span>:&nbsp;<span class="ace_constant ace_language ace_boolean">true</span>,&nbsp;<span class="ace_identifier">cols</span>:&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">20</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_identifier">rows</span>:&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">5</span><span class="ace_string ace_end">'</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hr</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">label_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Newsletter&nbsp;Type</span><span class="ace_string ace_end">"</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">br</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">select_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">newsletter</span><span class="ace_string ace_end">"</span>,&nbsp;<span class="ace_support ace_function">options_for_select</span><span class="ace_paren ace_lparen">([</span><span class="ace_string ace_start">'</span><span class="ace_string">weekly</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">monthly</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">yearly</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">])</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_end-tag-open ace_xml">&lt;/</span><span class="ace_meta ace_tag ace_tag-name ace_xml">div</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-open ace_xml">&lt;</span><span class="ace_meta ace_tag ace_tag-name ace_xml">hr</span><span class="ace_text ace_tag-whitespace ace_xml">&nbsp;</span><span class="ace_meta ace_tag ace_punctuation ace_tag-close ace_xml">/&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_text ace_xml">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="ace_support ace_ruby_tag">&lt;%=</span>&nbsp;<span class="ace_support ace_function">submit_tag</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Send</span><span class="ace_string ace_end">"</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_ruby_tag">&lt;%</span>&nbsp;<span class="ace_keyword">end</span>&nbsp;<span class="ace_support ace_ruby_tag">%&gt;</span>
</div></div></div></div><div class="cell text-cell"><h3>Routes</h3></div><div class="cell text-cell"><b><i>config/routes.rb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_class">Rails</span>.<span class="ace_identifier">application</span>.<span class="ace_identifier">routes</span>.<span class="ace_identifier">draw</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Root&nbsp;Route</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">root</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">newsletter#new</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Resources&nbsp;Only&nbsp;For&nbsp;The&nbsp;Newsletter&nbsp;Controller&nbsp;New&nbsp;And&nbsp;Create&nbsp;Actions</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">resources</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:newsletter</span>,&nbsp;<span class="ace_identifier">only</span>:&nbsp;<span class="ace_paren ace_lparen">[</span><span class="ace_constant ace_other ace_symbol ace_ruby">:new</span>,&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:create</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell text-cell"><h3>Newsletter Mailer</h3></div><div class="cell text-cell"><b><i>app/mailers/newsletter_mailer.rb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">NewsletterMailer</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">ApplicationMailer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">weekly</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">subject</span>,&nbsp;<span class="ace_identifier">emails</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">mail</span>&nbsp;<span class="ace_identifier">subject</span>:&nbsp;<span class="ace_identifier">subject</span>,&nbsp;<span class="ace_identifier">to</span>:&nbsp;<span class="ace_identifier">emails</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">monthly</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">subject</span>,&nbsp;<span class="ace_identifier">emails</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">mail</span>&nbsp;<span class="ace_identifier">subject</span>:&nbsp;<span class="ace_identifier">subject</span>,&nbsp;<span class="ace_identifier">to</span>:&nbsp;<span class="ace_identifier">emails</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">def</span>&nbsp;<span class="ace_identifier">yearly</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">subject</span>,&nbsp;<span class="ace_identifier">emails</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">mail</span>&nbsp;<span class="ace_identifier">subject</span>:&nbsp;<span class="ace_identifier">subject</span>,&nbsp;<span class="ace_identifier">to</span>:&nbsp;<span class="ace_identifier">emails</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell text-cell"><h3>Adding The Sidekiq Gem</h3></div><div class="cell text-cell"><div>Adding a background processing backend is not necessary with Rails 5. Rails 5 by default puts your jobs in a RAM queue. This being said, if you server restarts or something happens to your RAM you will loose all of your queued jobs. Using the RAM queue is fine for low priority jobs. If you are going to have jobs that are important and it would hurt you if they got lost or didnt run then it is recommended that you use some sort of persisted background job backend. There are many different persisted background job processing backends out there. This lecture will focus on using Delayed Job.&nbsp;</div><a href="https://github.com/collectiveidea/delayed_job">https://github.com/collectiveidea/delayed_job</a><br></div><div class="cell text-cell"><h3>Adding Delayed Job - Gemfile</h3></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">source</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">https://rubygems.org</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ruby</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">2.3.1</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">rails</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;5.0.0</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">&gt;=&nbsp;5.0.0.1</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">pg</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;0.18</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">puma</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;3.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">sass-rails</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;5.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">uglifier</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">&gt;=&nbsp;1.3.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">jquery-rails</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">jbuilder</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;2.5</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Add&nbsp;Delayed&nbsp;Job&nbsp;Gem</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">delayed_job_active_record</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">group</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:development</span>,&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:test</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">pry</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">group</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:development</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">letter_opener</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">web-console</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">listen</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;3.0.5</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">spring</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">spring-watcher-listen</span><span class="ace_string ace_end">'</span>,&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">~&gt;&nbsp;2.0.0</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_identifier">install</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">generate</span>&nbsp;<span class="ace_identifier">delayed_job</span><span class="ace_constant ace_other ace_symbol ace_ruby">:active_record</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">rake</span>&nbsp;<span class="ace_identifier">db</span><span class="ace_constant ace_other ace_symbol ace_ruby">:migrate</span>
</div></div></div></div><div class="cell text-cell"><h3>Configure Application For Delayed Job Backend</h3></div><div class="cell text-cell"><b><i>config/application.rb</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">require_relative</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">boot</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">rails</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Pick&nbsp;the&nbsp;frameworks&nbsp;you&nbsp;want:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">active_model/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">active_job/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">active_record/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">action_controller/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">action_mailer/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">action_view/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">action_cable/engine</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_function">require</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">sprockets/railtie</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;require&nbsp;"rails/test_unit/railtie"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Require&nbsp;the&nbsp;gems&nbsp;listed&nbsp;in&nbsp;Gemfile,&nbsp;including&nbsp;any&nbsp;gems</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;you've&nbsp;limited&nbsp;to&nbsp;:test,&nbsp;:development,&nbsp;or&nbsp;:production.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_class">Bundler</span>.<span class="ace_support ace_function">require</span><span class="ace_paren ace_lparen">(</span><span class="ace_keyword ace_operator">*</span><span class="ace_support ace_class">Rails</span>.<span class="ace_identifier">groups</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">module</span>&nbsp;<span class="ace_support ace_class">NewsletterExample</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">Application</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">Rails</span>::<span class="ace_support ace_class">Application</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Settings&nbsp;in&nbsp;config/environments/*&nbsp;take&nbsp;precedence&nbsp;over&nbsp;those&nbsp;specified&nbsp;here.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Application&nbsp;configuration&nbsp;should&nbsp;go&nbsp;into&nbsp;files&nbsp;in&nbsp;config/initializers</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;--&nbsp;all&nbsp;.rb&nbsp;files&nbsp;in&nbsp;that&nbsp;directory&nbsp;are&nbsp;automatically&nbsp;loaded.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Set&nbsp;Backend&nbsp;Job&nbsp;Processing&nbsp;For&nbsp;Delayed&nbsp;Job</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">config</span>.<span class="ace_identifier">active_job</span>.<span class="ace_identifier">queue_adapter</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:delayed_job</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rake</span>&nbsp;<span class="ace_identifier">jobs</span><span class="ace_constant ace_other ace_symbol ace_ruby">:work</span>
</div></div></div></div><div class="cell text-cell"><i>*Note: this command has to stay running just like your rails server. This is the delayed job server that processes the persisted jobs from the queue in the database</i></div><div class="cell text-cell"><i>*Note: remember to restart your server after Gemfile changes!!!</i></div><div class="cell text-cell"><h3>Resources</h3></div><div class="cell text-cell"><ul><li><a href="http://edgeguides.rubyonrails.org/active_job_basics.html">http://edgeguides.rubyonrails.org/active_job_basics.html</a><br></li><li><a href="http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag">http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag</a><br></li><li><a href="http://guides.rubyonrails.org/form_helpers.html">http://guides.rubyonrails.org/form_helpers.html</a><br></li><li><a href="http://apidock.com/rails/ActionView/Helpers/FormTagHelper">http://apidock.com/rails/ActionView/Helpers/FormTagHelper</a></li><li><a href="https://github.com/ryanb/letter_opener">https://github.com/ryanb/letter_opener</a><br></li><li><a href="https://github.com/collectiveidea/delayed_job">https://github.com/collectiveidea/delayed_job</a></li></ul></div></div>
  <script></script>
</body>
</html>
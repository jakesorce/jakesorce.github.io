<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- common.css -->
  <style>* {-webkit-tap-highlight-color: rgba(0,0,0,0);}html {-webkit-text-size-adjust: none;}body {font-family: Arial, Helvetica, sans-serif;margin: 0;color: #333;word-wrap: break-word;}h1, h2, h3, h4, h5, h6 {line-height: 1.1;}img {max-width: 100% !important;}blockquote {margin: 0;padding: 0 15px;color: #777;border-left: 4px solid #ddd;}hr {background-color: #ddd;border: 0;height: 1px;margin: 15px 0;}code {font-family: Menlo, Consolas, 'Ubuntu Mono', Monaco, 'source-code-pro', monospace;line-height: 1.4;margin: 0;padding: 0.2em 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px;}pre > code {margin: 0;padding: 0;font-size: 100%;word-break: normal;background: transparent;border: 0;}ol {list-style-type: decimal;}ol ol, ul ol {list-style-type: lower-latin;}ol ol ol, ul ol ol, ul ul ol, ol ul ol {list-style-type: lower-roman;}table {border-spacing: 0;border-collapse: collapse;margin-top: 0;margin-bottom: 16px;}table th {font-weight: bold;}table th, table td {padding: 6px 13px;border: 1px solid #ddd;}table tr {border-top: 1px solid #ccc;}table tr:nth-child(even) {background-color: #f8f8f8;}input[type="checkbox"] {cursor: default;margin-right: 0.5em;font-size: 13px;}.task-list-item {list-style-type: none;}.task-list-item+.task-list-item {margin-top: 3px;}.task-list-item input {float: left;margin: 0.3em 1em 0.25em -1.6em;vertical-align: middle;}#tag-field {margin: 8px 2px 10px;}#tag-field .tag {display: inline-block;background: #cadff3;border-radius: 4px;padding: 1px 8px;color: black;font-size: 12px;margin-right: 10px;line-height: 1.4;}</style>
  <!-- ace-static.css -->
  <style>.ace_static_highlight {white-space: pre-wrap;}.ace_static_highlight .ace_gutter {width: 2em;text-align: right;padding: 0 3px 0 0;margin-right: 3px;}.ace_static_highlight.ace_show_gutter .ace_line {padding-left: 2.6em;}.ace_static_highlight .ace_line {position: relative;}.ace_static_highlight .ace_gutter-cell {-moz-user-select: -moz-none;-khtml-user-select: none;-webkit-user-select: none;user-select: none;top: 0;bottom: 0;left: 0;position: absolute;}.ace_static_highlight .ace_gutter-cell:before {content: counter(ace_line, decimal);counter-increment: ace_line;}.ace_static_highlight {counter-reset: ace_line;}</style>
  <style>.ace-monokai .ace_gutter {background: #2F3129;color: #8F908A}.ace-monokai .ace_print-margin {width: 1px;background: #555651}.ace-monokai {background-color: #272822;color: #F8F8F2}.ace-monokai .ace_cursor {color: #F8F8F0}.ace-monokai .ace_marker-layer .ace_selection {background: #49483E}.ace-monokai.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px #272822;border-radius: 2px}.ace-monokai .ace_marker-layer .ace_step {background: rgb(102, 82, 0)}.ace-monokai .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid #49483E}.ace-monokai .ace_marker-layer .ace_active-line {background: #202020}.ace-monokai .ace_gutter-active-line {background-color: #272727}.ace-monokai .ace_marker-layer .ace_selected-word {border: 1px solid #49483E}.ace-monokai .ace_invisible {color: #52524d}.ace-monokai .ace_entity.ace_name.ace_tag,.ace-monokai .ace_keyword,.ace-monokai .ace_meta.ace_tag,.ace-monokai .ace_storage {color: #F92672}.ace-monokai .ace_punctuation,.ace-monokai .ace_punctuation.ace_tag {color: #fff}.ace-monokai .ace_constant.ace_character,.ace-monokai .ace_constant.ace_language,.ace-monokai .ace_constant.ace_numeric,.ace-monokai .ace_constant.ace_other {color: #AE81FF}.ace-monokai .ace_invalid {color: #F8F8F0;background-color: #F92672}.ace-monokai .ace_invalid.ace_deprecated {color: #F8F8F0;background-color: #AE81FF}.ace-monokai .ace_support.ace_constant,.ace-monokai .ace_support.ace_function {color: #66D9EF}.ace-monokai .ace_fold {background-color: #A6E22E;border-color: #F8F8F2}.ace-monokai .ace_storage.ace_type,.ace-monokai .ace_support.ace_class,.ace-monokai .ace_support.ace_type {font-style: italic;color: #66D9EF}.ace-monokai .ace_entity.ace_name.ace_function,.ace-monokai .ace_entity.ace_other,.ace-monokai .ace_entity.ace_other.ace_attribute-name,.ace-monokai .ace_variable {color: #A6E22E}.ace-monokai .ace_variable.ace_parameter {font-style: italic;color: #FD971F}.ace-monokai .ace_string {color: #E6DB74}.ace-monokai .ace_comment {color: #75715E}.ace-monokai .ace_indent-guide {background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y}</style>
  <!-- export.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
  <style>
    body{margin:0 auto;line-height:1.4}
    #nav{margin:5px 0 10px;font-size:15px}
    #titlearea{border-bottom:1px solid #ccc;font-size:17px;padding:10px 0;}
    #contentarea{font-size:15px;margin:16px 0}
    .cell{outline:0;min-height:20px;margin:5px 0;padding:5px 0;}
    .code-cell{font-family:Menlo,Consolas,'Ubuntu Mono',Monaco,'source-code-pro',monospace;font-size:12px;}
    .latex-cell{white-space:pre-wrap;}
  </style>
  <!-- User CSS -->
  <style> .text-cell {font-size: 15px;}.code-cell {font-size: 12px;}.markdown-cell {font-size: 15px;}.latex-cell {font-size: 15px;}</style>
</head>
<body class='grey darken-3 white-text container'>
  <div id="titlearea">
    <h2>Working With APIS Rails - Spoonacular</h2>
  </div>
  <div id="contentarea"><div class="cell text-cell"><h2>Signing Up For API Access</h2></div><div class="cell text-cell">We will be using the Spoonacular API for this demo. Here are some first steps you need to take:<div><ul><li>Visit the&nbsp;Spoonacular API Site:&nbsp;<a href="https://spoonacular.com/food-api">https://spoonacular.com/food-api</a></li><li>Sign up for a free account. <i>You have to put your Credit Card in but if you select the free version it won’t charge you!</i></li><li>Click on Applications at the top of the screen and then click on Default Application</li><li><img src="resources/93961BBED4F1287F078CEEC1E031C8BE.png" alt="Screen Shot 2016-09-19 at 8.55.41 PM.png"><br></li><li><img src="resources/47A62E3DB4B2E2CBA2C4E1F54BBFB512.png" alt="Screen Shot 2016-09-19 at 8.58.29 PM.png"><br></li><li>Save the key somewhere. This is our password to their API. This is how the API knows what data we are able to access and what data we aren’t able to access. This would be like logging into Devise as the current_user and having all your API calls scoped to only what that user can see / do.</li></ul></div></div><div class="cell text-cell"><h2>Generate The Rails Project</h2></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">new</span>&nbsp;<span class="ace_identifier">food_api</span>&nbsp;<span class="ace_keyword ace_operator">-</span><span class="ace_identifier">T</span>&nbsp;<span class="ace_keyword ace_operator">-</span><span class="ace_identifier">d</span>&nbsp;<span class="ace_identifier">postgresql</span>
</div></div></div></div><div class="cell text-cell"><b><i>Gemfile</i></b><br></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">spoonacular</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">group</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:development</span>,&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:test</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">pry</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">annotate</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rake</span>&nbsp;<span class="ace_identifier">db</span><span class="ace_constant ace_other ace_symbol ace_ruby">:create</span>
</div></div></div></div><div class="cell text-cell"><h2>Creating The Models - Has Many Through</h2></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">model</span>&nbsp;<span class="ace_identifier">recipe</span>&nbsp;<span class="ace_identifier">title</span>&nbsp;<span class="ace_identifier">instructions</span><span class="ace_constant ace_other ace_symbol ace_ruby">:text</span>&nbsp;<span class="ace_identifier">vegetarian</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">glutenFree</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">dairyFree</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">veryHealthy</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">cheap</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">veryPopular</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">sustainable</span><span class="ace_constant ace_other ace_symbol ace_ruby">:boolean</span>&nbsp;<span class="ace_identifier">weightWatcherSmartPoints</span><span class="ace_constant ace_other ace_symbol ace_ruby">:integer</span>&nbsp;<span class="ace_identifier">servings</span><span class="ace_constant ace_other ace_symbol ace_ruby">:integer</span>&nbsp;<span class="ace_identifier">preparationMinutes</span><span class="ace_constant ace_other ace_symbol ace_ruby">:integer</span>&nbsp;<span class="ace_identifier">cookingMinutes</span><span class="ace_constant ace_other ace_symbol ace_ruby">:integer</span>&nbsp;<span class="ace_identifier">readyInMinutes</span><span class="ace_constant ace_other ace_symbol ace_ruby">:integer</span>&nbsp;<span class="ace_identifier">image</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">model</span>&nbsp;<span class="ace_identifier">ingredient</span>&nbsp;<span class="ace_identifier">aisle</span>&nbsp;<span class="ace_identifier">image</span>&nbsp;<span class="ace_identifier">name</span>&nbsp;<span class="ace_identifier">amount</span><span class="ace_constant ace_other ace_symbol ace_ruby">:float</span>&nbsp;<span class="ace_identifier">unit</span>&nbsp;<span class="ace_identifier">originalString</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">model</span>&nbsp;<span class="ace_identifier">recipe_ingredient</span>&nbsp;<span class="ace_identifier">recipe</span><span class="ace_constant ace_other ace_symbol ace_ruby">:belongs_to</span>&nbsp;<span class="ace_identifier">ingredient</span><span class="ace_constant ace_other ace_symbol ace_ruby">:belongs_to</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rake</span>&nbsp;<span class="ace_identifier">db</span><span class="ace_constant ace_other ace_symbol ace_ruby">:migrate</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">annotate</span>&nbsp;<span class="ace_keyword ace_operator">--</span><span class="ace_identifier">routes</span>
</div></div></div></div><div class="cell text-cell"><h2>Setting Up The Models</h2></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;==&nbsp;Schema&nbsp;Information</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Table&nbsp;name:&nbsp;recipes</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null,&nbsp;primary&nbsp;key</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;instructions&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:text</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;vegetarian&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;glutenFree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;dairyFree&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;veryHealthy&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;cheap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;veryPopular&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;sustainable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:boolean</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;weightWatcherSmartPoints&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;servings&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;preparationMinutes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;cookingMinutes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;readyInMinutes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;image&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;created_at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;updated_at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">Recipe</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">ApplicationRecord</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">has_many</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipe_ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">has_many</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:ingredients</span>,&nbsp;<span class="ace_identifier">through</span>:&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipe_ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;==&nbsp;Schema&nbsp;Information</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Table&nbsp;name:&nbsp;ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null,&nbsp;primary&nbsp;key</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;aisle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;image&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;amount&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:float</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;unit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;originalString&nbsp;:string</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;created_at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;updated_at&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">Ingredient</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">ApplicationRecord</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">has_many</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipe_ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">has_many</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipes</span>,&nbsp;<span class="ace_identifier">through</span>:&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipe_ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;==&nbsp;Schema&nbsp;Information</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Table&nbsp;name:&nbsp;recipe_ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null,&nbsp;primary&nbsp;key</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;recipe_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;ingredient_id&nbsp;:integer</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;created_at&nbsp;&nbsp;&nbsp;&nbsp;:datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;updated_at&nbsp;&nbsp;&nbsp;&nbsp;:datetime&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;null</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">class</span>&nbsp;<span class="ace_support ace_class">RecipeIngredient</span>&nbsp;<span class="ace_keyword ace_operator">&lt;</span>&nbsp;<span class="ace_support ace_class">ApplicationRecord</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_support ace_function">belongs_to</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipe</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_support ace_function">belongs_to</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:ingredient</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></div><div class="cell text-cell"><h2>Securing Our Spoonacular API KEY Within Our Rails Application</h2></div><div class="cell text-cell">We need to secure our API token in our rails app. The biggest reason we do this is because when we push this code up to a PUBLIC Github repository the whole world will be able to see your API token if you commit it with the project. There are multiple ways of securing your sensitive data. We will use the Dot Env gem to accomplish this.</div><div class="cell text-cell"><b><i>Gemfile</i></b><br></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">group</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:development</span>,&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:test</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">pry</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">annotate</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">gem</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">dotenv-rails</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_identifier">install</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">touch</span>&nbsp;.<span class="ace_identifier">env</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">touch</span>&nbsp;.<span class="ace_identifier">env</span>.<span class="ace_identifier">example</span>
</div></div></div></div><div class="cell text-cell">We don’t want to commit the .env file. This file is going to contain environment variables with sensitive data. We created a .env.example so that when other developers come into our project they can copy that file and rename it as .env and fill it out with all of their sensitive data. This file should NEVER be comitted that’s why we will add it to our .gitignore before we even put any data into it!</div><div class="cell text-cell"><b><i>.gitignore</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;See&nbsp;https://help.github.com/articles/ignoring-files&nbsp;for&nbsp;more&nbsp;about&nbsp;ignoring&nbsp;files.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;If&nbsp;you&nbsp;find&nbsp;yourself&nbsp;ignoring&nbsp;temporary&nbsp;files&nbsp;generated&nbsp;by&nbsp;your&nbsp;text&nbsp;editor</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;or&nbsp;operating&nbsp;system,&nbsp;you&nbsp;probably&nbsp;want&nbsp;to&nbsp;add&nbsp;a&nbsp;global&nbsp;ignore&nbsp;instead:</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;&nbsp;&nbsp;git&nbsp;config&nbsp;--global&nbsp;core.excludesfile&nbsp;'~/.gitignore_global'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Ignore&nbsp;bundler&nbsp;config.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>/.<span class="ace_identifier">bundle</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Ignore&nbsp;all&nbsp;logfiles&nbsp;and&nbsp;tempfiles.</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>/<span class="ace_support ace_function">log</span>/<span class="ace_keyword ace_operator">*</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>/<span class="ace_identifier">tmp</span>/<span class="ace_keyword ace_operator">*</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">!</span><span class="ace_string ace_regexp">/log/</span>.<span class="ace_identifier">keep</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword ace_operator">!</span><span class="ace_string ace_regexp">/tmp/</span>.<span class="ace_identifier">keep</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;NEW&nbsp;CODE</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Ignore&nbsp;.env&nbsp;local&nbsp;file</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>.<span class="ace_identifier">env</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>
</div></div></div></div><div class="cell text-cell"><b><i>.env</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_class">SPOONACULAR_API_KEY</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string">gnSY00OsdfeqfqxHHp1aHYnSjsnBNrEfxPycurQ</span><span class="ace_string ace_end">"</span>
</div></div></div></div><div class="cell text-cell"><b><i>.env.example</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_support ace_class">SPOONACULAR_API_KEY</span><span class="ace_keyword ace_operator">=</span><span class="ace_string ace_start">"</span><span class="ace_string ace_end">"</span>
</div></div></div></div><div class="cell text-cell"><h2>Building A Custom Rake Task</h2></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">g</span>&nbsp;<span class="ace_identifier">task</span>&nbsp;<span class="ace_identifier">recipes</span>&nbsp;<span class="ace_identifier">fetch</span>
</div></div></div></div><div class="cell text-cell">This builds a custom rake task for us in the namespace recipes. The way we would call this rake task is:</div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rake</span>&nbsp;<span class="ace_identifier">recipes</span><span class="ace_constant ace_other ace_symbol ace_ruby">:fetch</span>
</div></div></div></div><div class="cell text-cell">This would exectue all of the code in the fetch task. The code in the fetch task is going to be responsible for grabbing the first 10 paginated recipies from the API and saving them into our database for fast, on demand querying.</div><div class="cell text-cell">When you have code in a task like this, you can easily set Heroku up to run the code in specific tasks at specific intervals. This would allow us to run this task every 24 hours to pull in new data from the API.</div><div class="cell text-cell"><b><i>lib/tasks/recipes.rake</i></b></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">namespace</span>&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:recipes</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">desc</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Get&nbsp;The&nbsp;First&nbsp;10&nbsp;Recipes&nbsp;From&nbsp;The&nbsp;Spoonacular&nbsp;API</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_identifier">task</span>&nbsp;<span class="ace_identifier">fetch</span>:&nbsp;<span class="ace_constant ace_other ace_symbol ace_ruby">:environment</span>&nbsp;<span class="ace_keyword">do</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">recipes_added</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">0</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">ingredients_added</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_constant ace_numeric">0</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">api_client</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_class">Spoonacular</span>::<span class="ace_support ace_class">API</span>.<span class="ace_identifier">new</span><span class="ace_paren ace_lparen">(</span><span class="ace_support ace_class">ENV</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">SPOONACULAR_API_KEY</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">])</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">results</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">api_client</span>.<span class="ace_identifier">search_recipes</span>.<span class="ace_identifier">body</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">results</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">results</span>.<span class="ace_identifier">each</span>&nbsp;<span class="ace_keyword">do</span>&nbsp;|<span class="ace_identifier">result</span>|
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">full_recipe</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_identifier">api_client</span>.<span class="ace_identifier">get_recipe_information</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">result</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">"</span><span class="ace_string">id</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">])</span>.<span class="ace_identifier">body</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">recipe</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_class">Recipe</span>.<span class="ace_identifier">where</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">title</span>:&nbsp;<span class="ace_identifier">full_recipe</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">title</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">])</span>.<span class="ace_identifier">first_or_initialize</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">full_recipe</span>.<span class="ace_identifier">each</span>&nbsp;<span class="ace_keyword">do</span>&nbsp;|<span class="ace_identifier">key</span>,&nbsp;<span class="ace_identifier">value</span>|
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Set&nbsp;Main&nbsp;Attributes</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">begin</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">next</span>&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">key</span>&nbsp;<span class="ace_keyword ace_operator">==</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">id</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">recipe</span>.<span class="ace_identifier">send</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_paren ace_start">#{</span><span class="ace_identifier">key</span><span class="ace_paren ace_end">}</span><span class="ace_string">=</span><span class="ace_string ace_end">"</span>,&nbsp;<span class="ace_identifier">value</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">rescue</span>&nbsp;<span class="ace_punctuation ace_separator ace_key-value">=&gt;</span>&nbsp;<span class="ace_identifier">e</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_class">Rails</span>.<span class="ace_variable ace_language">logger</span>.<span class="ace_identifier">error</span><span class="ace_paren ace_lparen">(</span><span class="ace_string ace_start">"</span><span class="ace_string">No&nbsp;attribute&nbsp;found&nbsp;for&nbsp;</span><span class="ace_paren ace_start">#{</span><span class="ace_identifier">key</span><span class="ace_paren ace_end">}</span><span class="ace_string">&nbsp;on&nbsp;Recipe</span><span class="ace_string ace_end">"</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">recipe</span>.<span class="ace_identifier">save</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">recipes_added</span>&nbsp;<span class="ace_keyword ace_operator">+=</span>&nbsp;<span class="ace_constant ace_numeric">1</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_comment">#&nbsp;Set&nbsp;Ingredients</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">full_recipe</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">extendedIngredients</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>.<span class="ace_identifier">each</span>&nbsp;<span class="ace_keyword">do</span>&nbsp;|<span class="ace_identifier">i</span>|
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">ingredient</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_class">Ingredient</span>.<span class="ace_identifier">where</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">name</span>:&nbsp;<span class="ace_identifier">i</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">name</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">])</span>.
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">first_or_initialize</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">aisle</span>:&nbsp;<span class="ace_identifier">i</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">aisle</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">image</span>:&nbsp;<span class="ace_identifier">i</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">image</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">amount</span>:&nbsp;<span class="ace_identifier">i</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">amount</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">unit</span>:&nbsp;<span class="ace_identifier">i</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">unit</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>,
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">originalString</span>:&nbsp;<span class="ace_identifier">i</span><span class="ace_paren ace_lparen">[</span><span class="ace_string ace_start">'</span><span class="ace_string">originalString</span><span class="ace_string ace_end">'</span><span class="ace_paren ace_rparen">]</span>&nbsp;<span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_identifier">ingredients_added</span>&nbsp;<span class="ace_keyword ace_operator">+=</span>&nbsp;<span class="ace_constant ace_numeric">1</span>&nbsp;<span class="ace_keyword">if</span>&nbsp;<span class="ace_identifier">ingredient</span>.<span class="ace_identifier">new_record</span>?&nbsp;
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_class">RecipeIngredient</span>.<span class="ace_identifier">create</span><span class="ace_paren ace_lparen">(</span><span class="ace_identifier">recipe_id</span>:&nbsp;<span class="ace_identifier">recipe</span>.<span class="ace_identifier">id</span>,&nbsp;<span class="ace_identifier">ingredient_id</span>:&nbsp;<span class="ace_identifier">ingredient</span>.<span class="ace_identifier">id</span><span class="ace_paren ace_rparen">)</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">puts</span>&nbsp;<span class="ace_string ace_start">'</span><span class="ace_string">Recipe&nbsp;Fetch&nbsp;Completed!</span><span class="ace_string ace_end">'</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">puts</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Number&nbsp;Of&nbsp;New&nbsp;Recipes:&nbsp;</span><span class="ace_paren ace_start">#{</span><span class="ace_identifier">recipes_added</span><span class="ace_paren ace_end">}</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="ace_support ace_function">puts</span>&nbsp;<span class="ace_string ace_start">"</span><span class="ace_string">Number&nbsp;Of&nbsp;New&nbsp;Ingredients:&nbsp;</span><span class="ace_paren ace_start">#{</span><span class="ace_identifier">ingredients_added</span><span class="ace_paren ace_end">}</span><span class="ace_string ace_end">"</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span>&nbsp;&nbsp;<span class="ace_keyword">end</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_keyword">end</span>
</div></div></div></div><div class="cell text-cell">The Spoonacular gem is not well documented (<a href="https://github.com/dwoznicki/spoonacular/tree/master/lib/spoonacular/api">https://github.com/dwoznicki/spoonacular/tree/master/lib/spoonacular/api</a>). I had to dig through the code to see what methods were avaliable to me. I also had to do a lot of .methods calls on objects to see what methods I could perform on each Spoonacular object. <i>(we will cover this in more depth in class)</i></div><div class="cell text-cell">The beauty of has_many_through relationships in Rails:</div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">bundle</span>&nbsp;<span class="ace_support ace_function">exec</span>&nbsp;<span class="ace_identifier">rails</span>&nbsp;<span class="ace_identifier">c</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Get&nbsp;the&nbsp;first&nbsp;recipe&nbsp;out&nbsp;of&nbsp;the&nbsp;database</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">recipe</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_class">Recipe</span>.<span class="ace_identifier">first</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Get&nbsp;all&nbsp;the&nbsp;ingredients&nbsp;for&nbsp;the&nbsp;recipe</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">recipe</span>.<span class="ace_identifier">ingredients</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Get&nbsp;the&nbsp;first&nbsp;ingredient&nbsp;out&nbsp;of&nbsp;the&nbsp;database</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ingredient</span>&nbsp;<span class="ace_keyword ace_operator">=</span>&nbsp;<span class="ace_support ace_class">Ingredient</span>.<span class="ace_identifier">first</span>
</div></div></div></div><div class="cell code-cell"><div class="ace-monokai"><div class="ace_static_highlight ace_show_gutter" style="counter-reset:ace_line 0"><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_comment">#&nbsp;Get&nbsp;all&nbsp;of&nbsp;the&nbsp;recipes&nbsp;in&nbsp;the&nbsp;database&nbsp;that&nbsp;have&nbsp;the&nbsp;specific&nbsp;ingredient</span>
</div><div class="ace_line"><span class="ace_gutter ace_gutter-cell" unselectable="on"></span><span class="ace_identifier">ingredient</span>.<span class="ace_identifier">recipes</span>
</div></div></div></div><div class="cell text-cell"></div></div>
  <script></script>
</body>
</html>